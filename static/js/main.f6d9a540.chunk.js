(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{367:function(t,e,a){t.exports=a(614)},528:function(t,e,a){},529:function(t,e,a){},530:function(t,e,a){},531:function(t,e,a){},532:function(t,e,a){},609:function(t,e,a){},610:function(t,e,a){},611:function(t,e,a){},612:function(t,e,a){},613:function(t,e,a){},614:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(66),s=a.n(c),i=a(28),o=a(29),u=a(32),l=a(30),p=a(33),d=a(31),m=a(196),f=a(265),h=a(102),v=a(314),y=a(251),b=a(336),g=a.n(b),E=(a(524),a(16)),O=a.n(E),j=a(23),x=function(t){return{type:"patient/put",payload:t}},S="http://188.242.178.146:8080";function k(t){return fetch(S+t,{mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then(function(t){return t.status>=200&&t.status<300?t.json():Promise.reject(t.statusText)})}function w(t,e){var a={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(e)};return fetch(S+t,a)}function D(t){return k("/patients/".concat(t))}function N(t){return w("/patients",t)}var C=function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:n=e.sent,console.log("GOT PATIENT",n),a(x(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},A=function(t){function e(){var t,a;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).savePatient=function(t){t.preventDefault();var e=a.state,n=e.name,r=e.birthDate,c=(new FormData(t.target),{name:n,birthDate:r.toISOString().substring(0,10),diseaseId:1,doctorId:1});a.props.create(c),alert("created")},a.handleOnChange=function(t,e){return a.setState(Object(m.a)({},e,t))},a}return Object(p.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(f.a,{trigger:r.a.createElement(h.a,null,"Add patient")},r.a.createElement(f.a.Header,null,"Add new patient"),r.a.createElement(f.a.Content,null,r.a.createElement(v.a,null,r.a.createElement(v.a.Field,{label:"Name",type:"text",control:y.a,onChange:function(e){return t.handleOnChange(e.target.value,"name")}}),r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Age"),r.a.createElement(g.a,{onDateChange:function(e){return t.handleOnChange(e,"birthDate")}})))),r.a.createElement(f.a.Actions,null,r.a.createElement(h.a,{positive:!0,icon:"checkmark",content:"Save",type:"submit",onClick:this.savePatient})))}}]),e}(r.a.Component),P=(Object(d.b)(null,{create:function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(A),function(t){return{type:"patients/put",payload:t}}),I=a(68),T=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.props.getPatients()}},{key:"render",value:function(){var t=this.props.patients;return r.a.createElement("section",{className:"PatientsList"},r.a.createElement("h2",null,"Patients"),r.a.createElement("ul",{className:"PatientsList-List"},t.map(function(t){return r.a.createElement(I.c,{to:"/patient/".concat(t.id,"/info"),key:t.id},r.a.createElement("li",{className:"PatientsList-Item",style:{cursor:"pointer"}},t.name," (",t.birthDate,")"))})))}}]),e}(r.a.Component),M=Object(d.b)(function(t){return{patients:t.patients||[]}},{getPatients:function(){return function(){var t=Object(j.a)(O.a.mark(function t(e){var a;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k("/patients");case 2:a=t.sent,e(P(a));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(T),R=a(85),F=a(184),z=a(115),G=a(43),H=a(250),U=(a(528),a(201)),L=function(t){return{type:"associations/put",payload:t}};function _(t){return k("/associations?patientId=".concat(t))}function q(t){return w("/associations/1",t)}var J=function(t){function e(){var t,a;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={text:"",showModal:!1},a.onSubmit=function(){"function"!==typeof a.props.getData&&console.warn("getData method is not provided");var t=a.props.getData(),e=t.predicate,n=t.type,r=a.state.text;a.props.create({predicate:e,text:r,associationType:n}),a.closeModal()},a.closeModal=function(){a.setState({showModal:!1})},a}return Object(p.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.position,n=e.style,c=void 0===n?{}:n,s=this.state,i=s.text,o=s.showModal,u="AssociationForm__Icon";switch(a){case"right":u+=" AssociationForm__Icon--right";break;default:u+=" AssociationForm__Icon--left"}return r.a.createElement(f.a,{trigger:r.a.createElement("span",{onClick:function(){t.setState({showModal:!0})}},r.a.createElement(G.a,{name:"sticky note outline",className:u,style:c})),open:o,onClose:this.closeModal},r.a.createElement(f.a.Header,null,"Add association"),r.a.createElement(f.a.Content,null,r.a.createElement(v.a,null,r.a.createElement(v.a.Field,{control:H.a,value:i,onChange:function(e){t.setState({text:e.target.value})}}))),r.a.createElement(f.a.Actions,null,r.a.createElement(h.a,{positive:!0,icon:"checkmark",content:"Save",onClick:this.onSubmit})))}}]),e}(n.Component),W=Object(d.b)(null,{create:function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:t.type=t.associationType,delete t.associationType,a({type:"associations/add",payload:t});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(J),Y=function(t){return{type:"history/put",payload:t}};function B(t){return k("/patients/".concat(t,"/status/draft"))}function X(t,e){return function(t,e){var a={method:"PUT",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(e)};return fetch(S+t,a)}("/patients/".concat(t,"/status/draft"),e)}function K(t){return w("/patients/".concat(t,"/status/draft"))}var Q=function(t){return k("/diseases/".concat(t,"/medicine"))};var V=function(t){return k("/diseases/".concat(t,"/states"))},Z=a(316),$=(a(529),function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.patient;(0,t.getHistory)(e.id)}},{key:"render",value:function(){var t=this.props.patient,e=t.name,a=t.birthDate,n=this.props.history,c=new Date(a),s=c.getFullYear(),i=c.getMonth(),o=new Date,u=o.getFullYear()-s+(o.getMonth()-i<0?1:0);return r.a.createElement("aside",{className:"PatientInfo"},r.a.createElement("section",{className:"PatientInfo-Name"},r.a.createElement("h2",null,e)),r.a.createElement("section",{className:"PatientInfo-Description"},r.a.createElement("h3",null,"Info"),r.a.createElement("div",null,r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(W,{position:"right",getData:function(){return{predicate:"eq({patient.age}, ".concat(u,")"),type:"patient"}}}),r.a.createElement("p",null,"Birth date: ",a)))),r.a.createElement("section",{className:"PatientInfo-History"},r.a.createElement("h3",null,"History"),n?n.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("p",null,"date:",t.submittedOn),r.a.createElement("p",null,"name:",t.state.name),r.a.createElement("br",null))}):r.a.createElement(Z.a,null)))}}]),e}(r.a.Component)),tt=Object(d.b)(function(t){return{patient:t.patient,history:t.history}},{getHistory:function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/patients/".concat(t,"/statuses"));case 2:n=e.sent,console.log("GET HISTORY",n),a(Y(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})($),et=(a(530),function(){return n.createElement("aside",{className:"Sidebar"},n.createElement(F.a,{pointing:!0,vertical:!0},Lt.map(function(t){return n.createElement(I.c,{to:t.path,key:t.name,activeClassName:"Sidebar-Link_active"},n.createElement(F.a.Item,{as:"li",name:t.name}))})))}),at=a(245),nt=(a(531),function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.props.getPatient(this.props.match.params.patientId)}},{key:"render",value:function(){return this.props.patient.id?r.a.createElement("section",{className:"Patient"},r.a.createElement(et,null),r.a.createElement("div",{className:"Patient-Main"},r.a.createElement(R.c,null,_t.map(function(t){return r.a.createElement(R.a,{path:t.path,component:t.component,key:t.path})})))):r.a.createElement(at.a,{active:!0,inverted:!0},r.a.createElement(Z.a,{inverted:!0}))}}]),e}(r.a.PureComponent)),rt=Object(d.b)(function(t){return{patient:t.patient}},{getPatient:C})(nt),ct=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=Object(j.a)(O.a.mark(function t(){return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.getAssociations(this.props.patientId);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.associations;return n.createElement("div",{className:"States-Draft"},n.createElement("h2",null,"\u0410\u0441\u0441\u043e\u0446\u0438\u0430\u0446\u0438\u0438"),t.map(function(t){return n.createElement("div",{key:t.id},n.createElement("p",null,n.createElement("b",null,t.type,": "),t.text))}))}}]),e}(n.PureComponent),st=Object(d.b)(function(t){return{associations:t.associations,patientId:t.patient.id}},{getAssociations:function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:n=e.sent,console.log("GET Associations",n),a(L(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(ct),it=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this.props.patient.status,e=t.state;return r.a.createElement("section",{className:"CurrentState"},r.a.createElement("h2",null,"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435"),r.a.createElement("h3",null,e.name),r.a.createElement("div",null,r.a.createElement("h4",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement("p",null,e.description)),r.a.createElement("div",null,r.a.createElement("h4",null,"\u0410\u043d\u0430\u043b\u0438\u0437\u044b"),r.a.createElement("ul",null,t.attributes.length?t.attributes.map(function(t){return r.a.createElement("li",{key:t.name},JSON.stringify(t))}):"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043e")),r.a.createElement("div",null,r.a.createElement("h4",null,"\u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430"),r.a.createElement("ul",null,t.medicines.length?t.medicines.map(function(t){return r.a.createElement("li",{key:t.name},JSON.stringify(t))}):"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u043d\u043e")))}}]),e}(r.a.PureComponent),ot=Object(d.b)(function(t){return{patient:t.patient}})(it),ut=function(t){return{type:"draft/put",payload:t}},lt=function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,console.log("GET DRAFT DATA",n),a(ut(n)),e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},pt=function(t,e){return function(){var a=Object(j.a)(O.a.mark(function a(n){var r;return O.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,X(t,e);case 2:r=a.sent,console.log("CREATE DRAFT",r),n(ut(e));case 5:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}()},dt=function(){return function(t){t({type:"draft/clear"})}},mt=function(t){return{type:"diseases/put",payload:t}},ft=a(77);a(532);function ht(t){return null===t?{color:"orange",text:"\u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438"}:t?{color:"green",text:"\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f"}:{color:"red",text:"\u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f"}}var vt=function(t){return r.a.createElement("div",{className:"States-NextState NextState"},r.a.createElement(W,{position:"right",getData:function(){return{predicate:"eq({status.state.id}, ".concat(t.id,")"),type:"state"}}}),r.a.createElement(ft.a,{className:"NextState-Label",color:ht(t.recommended).color,tag:!0},ht(t.recommended).text),r.a.createElement("div",{className:"NextState-Content"},r.a.createElement("h3",{className:"States-Heading"},t.state.name),r.a.createElement("p",null,"description: ",t.state.description),t.errors&&r.a.createElement("div",null,"errors:",t.errors.map(function(t,e){return r.a.createElement("p",{key:e},"code: ",t.code,", reason: ",t.reason)})),r.a.createElement(h.a,{className:"NextState-Button",basic:!0,color:"teal",onClick:function(){return t.confirmState(t.state)}},"Confirm")))},yt=function(t){return{type:"disease/put",payload:t}},bt=function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/patients/".concat(t,"/status/attributes"));case 2:return n=e.sent,console.log("GOT DISEASE",n),a(yt(n)),e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},gt=function(t){return{type:"nextStates/put",payload:t}},Et=function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/patients/".concat(t,"/status/draft/states"));case 2:return n=e.sent,console.log("GET NEXT",n),a(gt(n)),e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Ot=function(t){return{type:"medicines/put",payload:t}},jt=function(t){return{type:"graph/put",payload:t}},xt={states:[],transitions:[]},St=a(202),kt=a(361),wt=a.n(kt);St.cytoscape.use(wt.a);var Dt=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(l.a)(e).call(this,t))).cyRefs={},a.tooltip=null,a.previousTappedNodes={},a.setCY=function(t){return function(e){a.cyRefs[t]=e,a.cyRefs[t].on("tap",function(e){e.target===a.cyRefs[t]&&(a.tooltip.remove(),a.previousTappedNodes[t]&&(a.previousTappedNodes[t].removeListener("position"),a.cyRefs[t].removeListener("pan zoom resize")))}),a.cyRefs[t].nodes().on("tap",function(e){a.previousTappedNodes[t]&&(a.previousTappedNodes[t].removeListener("position"),a.cyRefs[t].removeListener("pan zoom resize")),a.previousTappedNodes[t]=e.target;var n=+e.target.id(),r=a.props.graph.states.find(function(t){return t.id===n}),c=e.target.popper({content:function(){var n=document.createElement("h3");n.textContent=r.name;var s=document.createElement("p");return s.textContent=r.description,Array.from(a.tooltip.children).forEach(function(t){return t.remove()}),a.tooltip.appendChild(n),a.tooltip.appendChild(s),document.body.appendChild(a.tooltip),e.target.on("position",function(){c.scheduleUpdate()}),a.cyRefs[t].on("pan zoom resize",function(){c.scheduleUpdate()}),a.tooltip}})})}},a.tooltip=document.createElement("div"),a.tooltip.style="z-index: 9999;border-radius: 5px; max-width: 200px; border: 1px solid #ccc; background: #fff; padding: 10px;",a}return Object(p.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this.props,e=t.status,a=t.graph,n=a.states.map(function(t){return{data:{id:t.id,label:t.name},selected:t.id===e.state.id,grabbable:!0}}),c=a.transitions.map(function(t){return{data:{source:t.from,target:t.to}}}),s={name:"breadthfirst"},i=[{selector:"node",style:{"background-color":"black",label:"data(label)","source-arrow-shape":"triangle-backcurve"}},{selector:"node:selected",style:{"background-color":"green"}},{selector:"edge",style:{width:1,"curve-style":"bezier","line-color":"#ccc","mid-target-arrow-color":"#ccc","mid-target-arrow-shape":"triangle-backcurve"}}],o={background:"#fff",borderRadius:"5px"};return r.a.createElement("div",{style:{height:"100%",paddingTop:"15px"}},r.a.createElement(f.a,{trigger:r.a.createElement(G.a,{name:"expand arrows alternate",style:{position:"absolute",zIndex:1}}),size:"fullscreen"},r.a.createElement(f.a.Content,null,r.a.createElement(St.ReactCytoscape,{elements:{nodes:n,edges:c},layout:s,style:i,styleContainer:Object(z.a)({height:"70vh",width:"100%"},o),cyRef:this.setCY("modal")}))),r.a.createElement(St.ReactCytoscape,{elements:{nodes:n,edges:c},cyRef:this.setCY("block"),layout:s,style:i,styleContainer:o}))}}]),e}(n.Component),Nt=Object(d.b)(function(t){return{graph:t.graph,status:t.patient.status}})(Dt),Ct=a(315),At=a(247),Pt=(a(609),function(t){function e(){var t,a;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={healthMatter:"",result:""},a.handleSubmit=function(t){t.preventDefault();var e=a.props.onDraftUpdate,n=a.state,r=n.healthMatter,c=n.result,s=a.props.diseaseData.find(function(t){return t.id===r}).name;e({id:r,value:c,name:s})},a.onHMChange=function(t,e){var n=e.value;return a.setState({healthMatter:n})},a.onResultChange=function(t){return a.setState({result:t.target.value})},a.getAssociationData=function(){return{predicate:"eq({status.".concat(a.state.healthMatter,"}, ").concat(a.state.result,")"),type:"symptom"}},a}return Object(p.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.attribute;t?this.setState({healthMatter:t.id,result:t.value}):this.setState({healthMatter:"",result:""})}},{key:"render",value:function(){var t=this.props,e=t.className,a=t.diseaseData,n=this.state,c=n.healthMatter,s=n.result,i=a&&a.map(function(t){return{key:t.id,text:t.name,value:t.id}});return r.a.createElement("section",{className:"NewStatus ".concat(e||"")},i&&r.a.createElement(v.a,{className:"NewStatus-Form",onSubmit:this.handleSubmit},r.a.createElement(v.a.Group,{inline:!0},r.a.createElement(v.a.Field,{className:"NewStatus-Field"},r.a.createElement(v.a.Select,{label:"Analysis or symptom",options:i,placeholder:"data",value:c,onChange:this.onHMChange})),r.a.createElement(v.a.Field,{className:"NewStatus-Field"},r.a.createElement(v.a.Field,{control:y.a,label:"Result",value:s,onChange:this.onResultChange})),r.a.createElement(h.a,{type:"submit",basic:!0,color:"green"},"Submit"),c&&s&&r.a.createElement(W,{style:{position:"relative"},getData:this.getAssociationData}))))}}]),e}(r.a.Component)),It=a(99),Tt=Object(It.c)({associations:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"associations/put":return e.payload;case"associations/clear":return[];case"associations/add":return[].concat(Object(U.a)(t),[e.payload]);default:return t}},draft:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"draft/put":return e.payload;case"draft/clear":return{};case"draft/update-state":return Object(z.a)({},t,{state:e.payload});default:return t}},patient:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"patient/put":return e.payload;case"patient/clear":return{};default:return t}},patients:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"patients/put":return e.payload;case"patients/clear":return[];default:return t}},nextStates:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"nextStates/put":return e.payload;case"nextStates/clear":return[];default:return t}},disease:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"disease/put":return e.payload;case"disease/clear":return[];default:return t}},diseases:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"diseases/put":return e.payload;case"diseases/clear":return[];default:return t}},history:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"history/put":return e.payload;case"history/clear":return[];default:return t}},medicines:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"medicines/put":return e.payload;case"medicines/clear":return[];default:return t}},graph:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"graph/put":return e.payload;case"graph/clear":return xt;default:return t}}}),Mt=a(362),Rt=Object(It.d)(Tt,Object(It.a)(Mt.a)),Ft=(a(610),function(t){function e(){var t,a;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={symptomsAmount:1,medicinesAmount:1,disableSubmit:!1},a.getAssociationData=function(){return{predicate:"eq({status.state.id}, ".concat(a.props.draft.state.id,")"),type:"state"}},a.onPlusClick=function(t){return function(){switch(t){case"attribute":a.setState({symptomsAmount:a.state.symptomsAmount+1});break;case"medicine":a.setState({medicinesAmount:a.state.medicinesAmount+1})}}},a.onDraftSubmit=Object(j.a)(O.a.mark(function t(){var e;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.setState({disableSubmit:!0}),e=a.props.patient.id,t.next=4,a.onDraftUpdate();case 4:return alert("saved!"),t.next=7,a.props.commitDraft(e);case 7:return t.next=9,a.props.updatePatientStatusData(e);case 9:a.setState({disableSubmit:!1});case 10:case"end":return t.stop()}},t)})),a.onDraftUpdate=function(){var t=Object(j.a)(O.a.mark(function t(e,n){var r,c,s,i,o,u,l;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.props,c=r.patient,s=r.draft,i=c.status,o=s.state||i.state,s&&s.attributes&&e&&(u=!1,s.attributes.map(function(t){return t.id===e.id&&(u=!0,t.value=e.value),t}),u||s.attributes.push(e)),n&&(s.medicines=[].concat(Object(U.a)(s.medicines),[n])),l={attributes:s&&s.attributes||[],medicines:s&&s.medicines||[],stateId:o&&o.id||s.stateId},t.next=8,a.props.createDraft(c.id,l);case 8:return t.next=10,a.props.getNextStates(c.id);case 10:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),a}return Object(p.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.patient;this.props.updatePatientStatusData(t.id)}},{key:"componentWillReceiveProps",value:function(t){var e=t.draft;this.setState({symptomsAmount:1,medicinesAmount:e.medicines&&e.medicines.length>0?e.medicines.length:1})}},{key:"render",value:function(){var t=this,e=this.props,a=e.patient,n=e.draft,c=e.disease,s=e.medicines,i=a&&a.status||{},o=n.state||i.state,u=n.attributes||[],l=n.medicines||[],p=this.state,d=p.symptomsAmount,m=p.medicinesAmount,f=c.filter(function(t){return!u.some(function(e){return e.id===t.id})});return console.log("STORE",Rt.getState()),r.a.createElement("div",{className:"States-Draft Draft"},r.a.createElement(W,{getData:this.getAssociationData}),r.a.createElement("h2",{className:"States-Heading"},"\u0427\u0435\u0440\u043d\u043e\u0432\u0438\u043a \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f"),r.a.createElement("p",null,"last updated: ",i.submittedOn),o&&r.a.createElement("div",null,r.a.createElement("p",null,"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435"),r.a.createElement("p",null,"state name: ",o.name),r.a.createElement("p",null,"description:",o.description),0!==l.length&&r.a.createElement("h3",null,"\u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430"),l&&l.map(function(t){return r.a.createElement("p",{key:t},s.find(function(e){return e.id===t}).name)})),r.a.createElement(Ct.a,{fitted:!0}),u&&u.map(function(e){return r.a.createElement(Pt,{key:e.id,patientId:a.id,statusId:i.id,onDraftUpdate:t.onDraftUpdate,diseaseData:[e],attribute:e})}),f&&new Array(d).fill(!0).map(function(e,n){return r.a.createElement("div",{className:"Draft-StatusFormContainer",key:n},n===d-1&&r.a.createElement(G.a,{name:"plus circle",color:"green",size:"large",className:"Draft-PlusButton",onClick:t.onPlusClick("attribute")}),r.a.createElement(Pt,{className:n<d-1?"Draft-StatusForm--Margined":"",patientId:a.id,statusId:i.id,onDraftUpdate:t.onDraftUpdate,diseaseData:f}))}),r.a.createElement(Ct.a,{fitted:!0}),s.length>0&&new Array(m).fill(!0).map(function(e,a){return r.a.createElement("div",{className:"Draft-StatusFormContainer",key:a},a===m-1&&r.a.createElement(G.a,{name:"plus circle",color:"green",size:"large",className:"Draft-PlusButton",onClick:t.onPlusClick("medicine")}),r.a.createElement(At.a,{placeholder:"\u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u043e",options:s.map(function(t){return{value:t.id,key:t.id,text:t.name}}),value:l[a]?l[a]:void 0,onChange:function(e,a){return t.onDraftUpdate(void 0,a.value)}}),l[a]&&r.a.createElement(W,{style:{position:"relative"},getData:function(){return{predicate:"eq({medicine.id}, ".concat(l[a],")"),type:"medicine"}}}))}),r.a.createElement("br",null),r.a.createElement(h.a,{type:"submit",fluid:!0,positive:!0,onClick:this.onDraftSubmit,disabled:this.state.disableSubmit},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a"))}}]),e}(r.a.Component)),zt=Object(d.b)(function(t){return{draft:t.draft,disease:t.disease,patient:t.patient,medicines:t.medicines}},{getDraft:lt,clearDraft:dt,commitDraft:function(t,e){return function(){var e=Object(j.a)(O.a.mark(function e(a){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},createDraft:pt,getNextStates:Et,getDisease:bt})(Ft),Gt=(a(611),function(t){function e(){var t,a;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).updatePatientStatusData=function(){var t=Object(j.a)(O.a.mark(function t(e){var n,r;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.props.getPatient(e);case 2:return t.prev=2,t.next=5,a.props.getDraft(e);case 5:t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(2),n={stateId:a.props.status.state.id,medicines:[],attributes:[]},t.next=12,a.props.createDraft(e,n);case 12:return t.next=14,a.props.getDisease(e);case 14:return t.next=16,a.props.getNextStates(e);case 16:return r=a.props.diseases.find(function(t){return t.name===a.props.diseaseName}).id,t.next=19,a.props.getMedicines(r);case 19:return t.next=21,a.props.getGraph(r);case 21:console.log("DRAFT",a.props.draft),console.log("GET diseaseData",a.props.disease);case 23:case"end":return t.stop()}},t,null,[[2,7]])}));return function(e){return t.apply(this,arguments)}}(),a.confirmState=function(t){a.props.updateState(t)},a.associationData=function(){return{predicate:"eq({status.state.id}, ".concat(a.props.status.state.id,")"),type:"state"}},a}return Object(p.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.props.getDiseases()}},{key:"componentWillReceiveProps",value:function(){var t=Object(j.a)(O.a.mark(function t(e){var a,n;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.patientId,!(n=e.status)||!this.props.status||n.state.id!==this.props.status.state.id){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.updatePatientStatusData(a);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.props,a=e.status,n=e.nextStates;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("section",{className:"States"},r.a.createElement("div",{className:"States-DraftWrap States-Wrap"},r.a.createElement(zt,{updatePatientStatusData:this.updatePatientStatusData}),r.a.createElement(Nt,null)),n.length?r.a.createElement("div",{className:"States-NextWrap States-Wrap"},r.a.createElement("div",{className:"States-Next"},n.map(function(e){return r.a.createElement(vt,Object.assign({key:e.state.id,confirmState:t.confirmState},e))}))):null))}}]),e}(r.a.Component)),Ht=Object(d.b)(function(t){return{nextStates:t.nextStates,draft:t.draft,patientId:t.patient.id,diseaseName:t.patient.diseaseName,status:t.patient.status,diseases:t.diseases}},{getDraft:lt,createDraft:pt,clearDraft:dt,updateState:function(t){return function(e){e(function(t){return{type:"draft/update-state",payload:t}}(t))}},getDiseases:function(){return function(){var t=Object(j.a)(O.a.mark(function t(e){var a;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k("/diseases");case 2:return a=t.sent,console.log("GOT DISEASES",a),e(mt(a)),t.abrupt("return",a);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getDisease:bt,getNextStates:Et,getPatient:C,getMedicines:function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:return n=e.sent,console.log("GOT MEDICINES",n),a(Ot(n)),e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},getGraph:function(t){return function(){var e=Object(j.a)(O.a.mark(function e(a){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return n=e.sent,a(jt(n)),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(Gt),Ut=[{name:"\u041f\u0430\u0446\u0438\u0435\u043d\u0442\u044b",path:"/patients",component:M},{path:"/patient/:patientId",component:rt}],Lt=[{name:"\u0427\u0435\u0440\u043d\u043e\u0432\u0438\u043a \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f",path:"draft",component:Ht},{name:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435",path:"current",component:ot},{name:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",path:"history",component:tt},{name:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",path:"info",component:tt},{name:"\u0410\u0441\u0441\u043e\u0446\u0438\u0430\u0446\u0438\u0438",path:"associations",component:st}],_t=Lt.map(function(t){return Object(z.a)({},t,{path:"/patient/:patientId/".concat(t.path)})}),qt=function(){return r.a.createElement(F.a,{attached:"top"},Ut.filter(function(t){return t.name}).map(function(t){return r.a.createElement(I.b,{to:t.path,key:t.name},r.a.createElement(F.a.Item,{as:"li",name:t.name}))}))};a(612),a(613);s.a.render(r.a.createElement(d.a,{store:Rt},r.a.createElement(I.a,null,r.a.createElement(function(){return r.a.createElement("div",{className:"App"},r.a.createElement(qt,null),r.a.createElement("main",{className:"Main"},r.a.createElement(R.c,null,r.a.createElement(R.a,{exact:!0,path:"/",component:M}),Ut.map(function(t){return r.a.createElement(R.a,{path:t.path,component:t.component,key:t.path})}))))},null))),document.getElementById("root"))}},[[367,1,2]]]);
//# sourceMappingURL=main.f6d9a540.chunk.js.map